using YPrime.Core.BusinessLayer.Interfaces;
using YPrime.Core.BusinessLayer.Models;
using YPrime.Core.BusinessLayer.Services;

namespace YPrime.BusinessLayer.UnitTests.Services.BusinessRuleServiceTests
{
    public abstract class BusinessRuleServiceTestBase : ConfigServiceTestBase<BusinessRuleModel>
    {
        protected string ExpectedHttpAddress = $"{BaseTestHttpAddress}/BusinessRule";

        protected const string DefaultGetAllResponseContent = "[{\"id\":\"7bff4774-6db1-4a18-8d8e-33addd4dc8d0\",\"name\":\"Visit visibility \",\"description\":\"The visit is visible when  screening visit status is equal to complete \",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"3ea7353f-5fe5-4942-a0d5-bdd243ebfdce\\\",\\\"entity\\\":\\\"status\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"status-category\\\",\\\"value\\\":\\\"Visit\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"visit\\\",\\\"value\\\":\\\"90a6b076-87ea-4a34-8194-34976546bc2f\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"value\\\":0,\\\"name\\\":\\\"comparison\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"visit-status\\\",\\\"value\\\":4}]}]}\",\"autogenerated\":false},{\"id\":\"c4242837-1229-45e1-906c-a07e07e075dd\",\"name\":\"Favorites Questionnaire - Color Red Selected\",\"description\":\"Favorites Questionnaire - Color Red Selected\",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"e0ab5aeb-1523-478f-8064-bd6ddc0c35b2\\\",\\\"entity\\\":\\\"data\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire-response-type\\\",\\\"value\\\":\\\"Current\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire\\\",\\\"value\\\":\\\"85aabc68-0605-4a9d-9cee-046b1c43df84\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questions\\\",\\\"value\\\":\\\"e9618a71-334c-4c81-a6e0-cebd1a7b2ff6\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"comparison-operator\\\",\\\"value\\\":0},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"choices\\\",\\\"value\\\":\\\"edd528c3-c8bb-43c9-9e54-0c2439b991bc\\\"},null]}]}\",\"autogenerated\":false},{\"id\":\"76c4690b-e34e-4550-bc7b-c6394ca4c71a\",\"name\":\"Favorites Questionnaire - Color Blue Selected\",\"description\":\"Favorites Questionnaire - Color Blue Selected\",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"eaa187fb-ae84-4bab-abaf-a21b168d2068\\\",\\\"entity\\\":\\\"data\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire-response-type\\\",\\\"value\\\":\\\"Current\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire\\\",\\\"value\\\":\\\"85aabc68-0605-4a9d-9cee-046b1c43df84\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questions\\\",\\\"value\\\":\\\"e9618a71-334c-4c81-a6e0-cebd1a7b2ff6\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"comparison-operator\\\",\\\"value\\\":0},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"choices\\\",\\\"value\\\":\\\"1c95da75-e308-4ae5-ada6-37af99011dfd\\\"},null]}]}\",\"autogenerated\":false},{\"id\":\"4b7aa2ae-6b3a-4f23-9f0b-be87cdb0f31c\",\"name\":\"Favorites Questionnaire - Color Green Selected\",\"description\":\"Favorites Questionnaire - Color Green Selected\",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"cea19dd8-1045-444d-b131-9503259056b7\\\",\\\"entity\\\":\\\"data\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire-response-type\\\",\\\"value\\\":\\\"Current\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire\\\",\\\"value\\\":\\\"85aabc68-0605-4a9d-9cee-046b1c43df84\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questions\\\",\\\"value\\\":\\\"e9618a71-334c-4c81-a6e0-cebd1a7b2ff6\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"comparison-operator\\\",\\\"value\\\":0},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"choices\\\",\\\"value\\\":\\\"11eb0363-582f-4711-b9a0-b52724a0d170\\\"},null]}]}\",\"autogenerated\":false},{\"id\":\"72849d1a-5cde-4ef8-aab4-87c53e4623a1\",\"name\":\"Favorites Questionnaire - No Favorite Selected\",\"description\":\"Favorites Questionnaire - No Favorite Selected\",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"39590eb2-b35f-4332-a1ba-eb85f76b808c\\\",\\\"entity\\\":\\\"data\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire-response-type\\\",\\\"value\\\":\\\"Current\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire\\\",\\\"value\\\":\\\"85aabc68-0605-4a9d-9cee-046b1c43df84\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questions\\\",\\\"value\\\":\\\"e9618a71-334c-4c81-a6e0-cebd1a7b2ff6\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"comparison-operator\\\",\\\"value\\\":0},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"choices\\\",\\\"value\\\":\\\"7b9dab41-0f67-4672-b60e-eb7555253260\\\"},null]}]}\",\"autogenerated\":false},{\"id\":\"a0e0305f-fcf8-4437-bf1e-eaed34cfdef2\",\"name\":\"Radio Button rule\",\"description\":\"Radio Button rule\",\"jsonBlob\":\"{\\\"condition\\\":\\\"and\\\",\\\"rules\\\":[{\\\"id\\\":\\\"c02d7dd9-0bf1-4f14-b0da-8f85bca6a65d\\\",\\\"entity\\\":\\\"data\\\",\\\"columns\\\":[{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire-response-type\\\",\\\"value\\\":\\\"Current\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questionnaire\\\",\\\"value\\\":\\\"0b5c3a50-85b7-49ae-b7eb-1ca98bb47d27\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"questions\\\",\\\"value\\\":\\\"0110b02f-8de3-4510-a79d-72951cdcc041\\\"},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"comparison-operator\\\",\\\"value\\\":0},{\\\"isVisible\\\":true,\\\"extraInfo\\\":null,\\\"type\\\":\\\"dropdown\\\",\\\"name\\\":\\\"choices\\\",\\\"value\\\":\\\"62c63392-4394-40a2-b18f-d94d444ee080\\\"},null]}]}\",\"autogenerated\":false}]";

        protected BusinessRuleServiceTestBase()
           : base(DefaultGetAllResponseContent)
        { }

        protected IBusinessRuleService GetService()
        {
            var service = new BusinessRuleService(
                MockHttpFactory.Object,
                MemoryCache,
                MockSessionService.Object,
                MockServiceSettings.Object,
                _authSettings,
                MockAuthService.Object);

            return service;
        }
    }
}
